(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{111:function(e,t,a){},115:function(e,t,a){},189:function(e,t,a){"use strict";a.r(t);var s=a(2),n=a.n(s),c=a(35),r=a.n(c),o=(a(111),a(112),a(113),a(21)),i=a(11),l=(a(115),a(15)),u=a(16),d=a(18),j=a(17),h=a(196),m=a(190),p=a(198),b=a(1),g=function(e){return e.error?Object(b.jsx)(p.a,{color:"danger",children:e.error}):""},f=function(e){var t=e.src?"uploads/".concat(e.src):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAMFBMVEXR0cn////Ozsb5+fjd3dfn5+PV1c7t7er29vTT08vv7+z6+vnf39ry8vDZ2dLi4t3+Z5MVAAAFjUlEQVR4nO2dC7aqMAxFIVAERJj/bJ+9LFQUlLRJk/C6R8BZSfPrh6LIZDKZTCaTyWQymUwmk8lkTgkASH8CD3dh0NTDNDnnpmmoGziT1LuU0fVVuabq3VicQSXA6Npyj9aNxkVCc7nuypu5Xhq7GqHet97KkoNNjTD9Mt8Lkz1nhQGhzzvrZEsijO+h8zdVbUljj9bn6aU/+yhQB+nz2DAjXIIFluXFgMTuWIbYo+2kBfwAxih9nlG1GSOW4BPNixEGAoFlqbfEgYlEoK9wpKVsQ2RBj04rEgSZJyrXYkMosCwbaTkb4CrtX1yl5XwAN1KBZXlT5qdkYfSJsoDakQtUthQhrhjdplVkRAYf9WjyUxaBZSkt60FUR/gNNd0iba5/RUmwgbCpzBF6HUbkM6ESI7KtQo+OlcgoUEU4ZcqFC07eiICfbmOo5BVyxhnPKC0QHLNCcTdlqblfEXdTjrZpjfQQnG6+tsckK5A13c8IV27MucIjvRDZBUovRO5s6JGtvin2mn5RSwpkz/ce0ZyfIJQKB1PySfcWotNv9prNIzo3TaJQNCEmSPhleRVVSLultsPpFcra8PxemmOpfYXnz/gpqjbZuTfvOHhGdtp2+u7pP+iAU0wxZAUmSBfCRzISBFPpLUT+UDPICkywEKUFsi9E+ZNR3Dlf/mAU9+aT/GkMZjeVd1Lu/TXxSFpwTzIUmJB3si++iz/DqFB6i3uG0YjSFdsDNoXSwhbYjKhkFRZ84VSNQK4OQ3Z8sYblmLCyWzMMCqUlvUHvp5p81EMeT9WkwgfEPYaGnuIDypSh7/qhh7IX1lGPfkB3EVj86PMOZHed9T6rQCRRr8CCZqdGtcB7uIk9u3BVGmSeRJaoSm6rfSXqmpD8/PcI0IR6amXmcbrAIlVPS/8b6PDHUG5mDDgDI64Sb5XniC0wGluVr7X8Bppje+CmX78shl8L8jYUdvX9cRe5+4bp9WJe3gxAV7t+vSrb3g2dvSc9v+BfRu7Gsa6Huh7H7lQPJWcymUwmk1kBC9IfQsyfpG6sh8m5i8e5aajHrjiDVv9Xi+Fekm6X3ldfnDZ2ZXpxlyNNcHvxMqU/Fwl865l2+ygzKu/G+/LTji+2dCZM6eWFD/Yrp32gAcUUu9ndTorbfhhpjtVonUwd/efKEW4Kp6cw0F4J1vY/D6jprzxXiuyIneAfRcukP2QX5ih9p0Aj8xM14jtuUHO/qiC9HPmen30ieIaP5I8kB7hKmTHJI1EzIqsx/DxCCAK/EErloQ9Se2pCD11Ie9SG8QnvfZLG1BSPtnyS7mR0k+R1qA2qNPGG9J9AWFLcCk4eRNfwn48WFsgvUVwgt6OKrsEFVokaBLJexkjxotABGC/USOXBd7hew0zy/NwxeC5fitSie3A0jALdxDcY/gEpnwjXkOcM/n8gIKEOqIqizALt7Rpli3CGdCnqqGXeIaxt0jyIjIau50/ySmkIZMMpnT7qIfJTpT7qoaneVMbRBZKnJdTl+lco3vpWVXB/QlCCK+l6d4k3YYoXu2OINqLeTLEQmTEUVtzvRG7YaOsKt4gyogETRhpR/yr0xJhQdy5ciAinqsuZJ+GFjeqK9JXgh2oVNxVrglthC6liJjBhqC/YngTGGiNxxhMYa1L8YYWKoL1vE/XMQlhdI/3VGILc1JKTBrmpoUjqCYmm0t+MIyDp20n3M+ikb6YmXUDXpqZyhQefL6S/GAv6BIq1ZYju9M0tQ3RGNJYNPciMaKb5fYI8uWCoc1pAhhobY8Q1KIHGyu4Z1Ckpg6EUuR9sZBS8ZkIptFazeVB1G0h/bQiodGFSIapFNJgOkbMai+kQ9/MkmwoRAg32Th7MIIP3r41cYBRaLNpwZZtNhZge2KaXYgpTm5FmU+E/dmdklf1GTzoAAAAASUVORK5CYII=";return Object(b.jsx)("img",{src:e.file||t,className:"img-fluid rounded-circle ml-3 avatar",alt:"user avatar"})},O=function(e){return Object(b.jsxs)(m.a,{className:"heading",children:[Object(b.jsx)(f,{src:e.user.avatar}),Object(b.jsx)("div",{children:"\u062c\u0647\u0627\u062a \u0627\u0644\u0627\u062a\u0635\u0627\u0644"}),Object(b.jsx)("div",{className:"mr-auto nav-link",onClick:e.toggleShowProfileEdit,children:Object(b.jsx)("i",{className:"fa fa-bars"})})]})},x=a(27),v=a.n(x),S=a(191),w=function(e){return Object(b.jsxs)("div",{className:"contact",children:[Object(b.jsxs)("div",{children:[Object(b.jsx)(f,{src:e.contact.avatar}),!0===e.contact.status?Object(b.jsx)("i",{className:"fa fa-circle online"}):""]}),Object(b.jsxs)("div",{className:"w-50",children:[Object(b.jsx)("div",{className:"name",children:e.contact.name}),Object(b.jsx)("div",{className:"small last-message",children:e.message?e.message.content:"\u0627\u0646\u0642\u0631 \u0647\u0646\u0627 \u0644\u0628\u062f\u0621 \u0627\u0644\u0645\u062d\u0627\u062f\u062b\u0629"})]}),Object(b.jsxs)("div",{className:"flex-grow-1 text-left",children:[Object(b.jsx)("div",{className:"small text-muted",children:e.message?v()(e.message.date).format("hh:mm a"):""}),e.unseen>0?Object(b.jsx)(S.a,{color:"success",children:e.unseen}):""]})]})},N=a(44),y=a(192),C=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var s=arguments.length,n=new Array(s),c=0;c<s;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={search:""},e.onSearch=function(t){return e.setState({search:t.target.value})},e.renderContact=function(t,a){if(t.name.includes(e.state.search)){var s=e.props.messages.filter((function(e){return e.sender===t._id||e.receiver===t._id})),n=s[s.length-1],c=s.filter((function(e){return!e.seen&&e.sender===t._id})).length;return Object(b.jsx)("div",{className:"w-100",onClick:e.props.onChatNavigate.bind(Object(N.a)(e),t),children:Object(b.jsx)(w,{contact:t,message:n,unseen:c})},a)}},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this;return Object(b.jsxs)("div",{className:"list",children:[Object(b.jsx)(m.a,{className:"search",children:Object(b.jsx)(y.a,{onChange:this.onSearch,placeholder:"\u0628\u062d\u062b"})}),Object(b.jsx)(m.a,{id:"contacts",children:this.props.contacts.map((function(t,a){return e.renderContact(t,a)}))})]})}}]),a}(n.a.Component),k=a(193),A=a(199),I=a(200),U=a(201),P=a(194),T=Object(i.g)((function(e){return Object(b.jsxs)(m.a,{className:"heading m-0",children:[Object(b.jsx)("div",{onClick:e.toggleShowProfile,children:Object(b.jsx)(f,{src:e.contact.avatar})}),Object(b.jsxs)("div",{className:"text-right",children:[Object(b.jsx)("div",{children:e.contact?e.contact.name:""}),Object(b.jsx)("small",{children:e.typing?"\u064a\u0643\u062a\u0628 \u0627\u0644\u0622\u0646":!0===e.contact.status?"\u0645\u062a\u0635\u0644 \u0627\u0644\u0622\u0646":e.contact.status?v()(e.contact.status).fromNow():void 0})]}),Object(b.jsx)(k.a,{className:"mr-auto",navbar:!0,children:Object(b.jsxs)(A.a,{children:[Object(b.jsx)(I.a,{tag:"a",className:"nav-link",children:Object(b.jsx)("i",{className:"fa fa-ellipsis-v"})}),Object(b.jsxs)(U.a,{children:[Object(b.jsx)(P.a,{onClick:function(t){return e.history.push("/password")},children:"\u062a\u063a\u064a\u064a\u0631 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631"}),Object(b.jsx)(P.a,{divider:!0}),Object(b.jsx)(P.a,{onClick:e.logout,children:"\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062e\u0631\u0648\u062c"})]})]})})]})})),E=function(e){return Object(b.jsx)("div",{className:e.message.outgoing?"message-item":"message-item incoming",children:Object(b.jsx)("div",{className:"d-flex flex-row",children:Object(b.jsxs)("div",{className:"body m-1 mr-2",children:[Object(b.jsx)("div",{children:e.message.content}),Object(b.jsx)("span",{className:"small text-muted",children:v()(e.message.date).format("hh:mm a | MMMMD")})]})})})},D=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var s=arguments.length,n=new Array(s),c=0;c<s;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).renderMessage=function(t,a){return t.outgoing=t.receiver!==e.props.user._id,Object(b.jsx)(E,{message:t},a)},e}return Object(u.a)(a,[{key:"render",value:function(){return Object(b.jsx)("div",{id:"messages",children:this.props.messages.map(this.renderMessage)})}}]),a}(n.a.Component),M=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var s=arguments.length,n=new Array(s),c=0;c<s;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={message:"",lastType:!1},e.onChange=function(t){return e.setState({message:t.target.value})},e.onSend=function(t){if(e.state.message){var a={content:e.state.message,date:(new Date).getTime()};e.props.sender(a),e.setState({message:""})}},e.onKeyDown=function(t){"Enter"!==t.key||t.shiftKey?(!e.state.lastType||v()()-e.state.lastType>2e3)&&(e.setState({lastType:v()()}),e.props.sendTyping()):(e.setState({lastType:!1}),e.onSend(),t.preventDefault())},e}return Object(u.a)(a,[{key:"render",value:function(){return Object(b.jsxs)("div",{id:"send-message",children:[Object(b.jsx)(y.a,{type:"textarea",rows:"1",onKeyDown:this.onKeyDown,onChange:this.onChange,value:this.state.message,placeholder:"\u0627\u0643\u062a\u0628 \u0631\u0633\u0627\u0644\u062a\u0643 \u0647\u0646\u0627"}),Object(b.jsx)("i",{className:"btn text-muted px-3 send",onClick:this.onSend,children:"send"})]})}}]),a}(n.a.Component),q=function(e){return Object(b.jsxs)("div",{className:e.open?"side-profile open":"side-profile",children:[Object(b.jsxs)(m.a,{className:"heading",children:[Object(b.jsx)("div",{className:"mr-2 nav-link",onClick:e.toggleShowProfile,children:Object(b.jsx)("i",{className:"fa fa-arrow-right"})}),Object(b.jsx)("div",{children:e.contact.name})]}),Object(b.jsxs)("div",{className:"d-flex flex-column overflow-auto",children:[Object(b.jsx)(f,{src:e.contact.avatar}),Object(b.jsxs)("div",{className:"bg-white px-3 py-2",children:[Object(b.jsx)("label",{className:"text-muted",children:" \u0631\u0633\u0627\u0644\u0629 \u0627\u0644\u062d\u0627\u0644\u0629 "}),Object(b.jsx)("p",{children:e.contact.about?e.contact.about:"\u0623\u0647\u0644\u0627 \u0628\u0643"})]})]})]})},F=a(32),R=a(195),G=a(100),B=a(19),V=a.n(B),Z=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).state={name:s.props.user.name,about:s.props.user.about,avatar:s.props.avatar},s.showFileUpload=function(e){return s.fileUpload.current.click()},s.onImageChange=function(e){e.target.files&&e.target.files[0]&&s.setState({image:URL.createObjectURL(e.target.files[0]),avatar:e.target.files[0]})},s.onChange=function(e){var t;return s.setState((t={},Object(F.a)(t,e.target.name,e.target.value),Object(F.a)(t,"error",null),t))},s.onSubmit=function(e){e.preventDefault();var t=new FormData;t.append("name",s.state.name),t.append("about",s.state.about),s.state.avatar&&t.append("avatar",s.state.avatar,s.state.avatar.name),V.a.post("/api/account",t).then(s.props.toggleShowProfileEdit()).catch((function(e){return s.setState({error:e.response.data.message})}))},s.onClose=function(e){s.setState({image:!1,name:s.props.user.name,about:s.props.user.about}),s.props.toggleShowProfileEdit()},s.fileUpload=n.a.createRef(),s}return Object(u.a)(a,[{key:"render",value:function(){return Object(b.jsxs)("div",{className:this.props.open?"side-profile open":"side-profile",children:[Object(b.jsxs)(m.a,{className:"heading",children:[Object(b.jsx)("div",{className:"mr-2 nav-link",onClick:this.onClose,children:Object(b.jsx)("i",{className:"fa fa-arrow-right"})}),Object(b.jsx)("div",{children:"\u0627\u0644\u0645\u0644\u0641 \u0627\u0644\u0634\u062e\u0635\u064a"})]}),Object(b.jsx)("div",{className:"d-flex flex-column",style:{overflow:"auto"},children:Object(b.jsxs)(R.a,{onSubmit:this.onSubmit,children:[Object(b.jsx)(g,{error:this.state.error}),Object(b.jsx)("div",{className:"text-center",onClick:this.showFileUpload,children:Object(b.jsx)(f,{src:this.props.user.avatar,file:this.state.image})}),Object(b.jsx)("input",{type:"file",ref:this.fileUpload,onChange:this.onImageChange,className:"d-none",name:"avatar"}),Object(b.jsxs)("div",{className:"bg-white px-4 py-2",children:[Object(b.jsx)("label",{className:"text-muted",children:"\u0627\u0644\u0627\u0633\u0645"}),Object(b.jsx)(y.a,{value:this.state.name,name:"name",onChange:this.onChange,required:!0,autoComplete:"off"})]}),Object(b.jsxs)("div",{className:"bg-white px-3 py-2",children:[Object(b.jsx)("label",{className:"text-muted",children:"\u0631\u0633\u0627\u0644\u0629 \u0627\u0644\u062d\u0627\u0644\u0629"}),Object(b.jsx)(y.a,{value:this.state.about,name:"about",onChange:this.onChange,required:!0,autoComplete:"off"})]}),Object(b.jsx)("div",{className:"bg-white px-3 py-2",children:Object(b.jsx)(G.a,{block:!0,className:"mt-3",children:"\u062d\u0641\u0638"})})]})})]})}}]),a}(n.a.Component),X=a(105),J=a.n(X),K={login:function(e){localStorage.setItem("user",JSON.stringify(e)),V.a.defaults.headers.common.Authorization=e.token},init:function(){var e=JSON.parse(localStorage.getItem("user"));V.a.defaults.headers.common.Authorization=e?e.token:""},auth:function(){return null!==localStorage.getItem("user")},guest:function(){return null===localStorage.getItem("user")||"undefined"===localStorage.getItem("user")},logout:function(){delete V.a.defaults.headers.common.Authorization,localStorage.removeItem("user")},getToken:function(){var e=JSON.parse(localStorage.getItem("user"));return e?e.token:""},setUser:function(e){var t=JSON.parse(localStorage.getItem("user"));e.token=t.token,localStorage.setItem("user",JSON.stringify(e))}},Y=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var s=arguments.length,n=new Array(s),c=0;c<s;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={contacts:[],messages:[],contact:{},showProfile:!1,showProfileEdit:!1},e.onChatNavigate=function(t){e.setState({contact:t}),e.state.socket.emit("seen",t._id);var a=e.state.messages;a.forEach((function(e,s){e.sender===t._id&&(a[s].seen=!0)})),e.setState({messages:a})},e.intiSocketConnection=function(){var t=J()("ws://localhost:3001",{query:"token=".concat(K.getToken())});e.setState({socket:t}),t.on("connect",(function(){e.setState({connected:!0})})),t.on("data",(function(t,a,s,n){var c=a[0]||{};e.setState({user:t,contact:c,contacts:a,messages:s},(function(){e.updateUserState(n)}))})),t.on("message",(function(t){t.sender===e.state.contact._id&&(e.setState({typing:!1}),e.state.socket.emit("seen",e.state.contact._id),t.seen=!0);var a=e.state.messages.concat(t);e.setState({messages:a})})),t.on("disconnect",(function(){e.setState({connected:!1})})),t.on("new_user",(function(t){e.setState({contacts:e.state.contacts.concat(t)})})),t.on("user_status",(function(t){e.updateUserState(t)})),t.on("user_updated",(function(t){e.onUpdateUser(t)})),t.on("new_message",(function(t){e.setState({messages:e.state.messages.concat(t)})})),t.on("typing",e.onTypingMessage),t.on("error",(function(t){"Unauthenticated"===t&&(K.logout(),e.props.histroy.push("/"))}))},e.onUpdateUser=function(t){if(e.state.user._id===t._id)return e.setState({user:t}),void K.setUser(t);var a=e.state.contacts;a.forEach((function(e,s){e._id===t._id&&(a[s]=t,a[s].status=e.status)})),e.setState({contacts:a}),e.state.contact._id===t._id&&e.setState({contact:t})},e.onTypingMessage=function(t){if(e.state.contact._id===t){e.setState({typing:t}),clearTimeout(e.state.timeout);var a=setTimeout(e.typingTimeout,3e3);e.setState({timeout:a})}},e.typingTimeout=function(){return e.setState({typing:!1})},e.sendMessage=function(t){if(e.state.contact._id){t.receiver=e.state.contact._id;var a=e.state.messages.concat(t);e.setState({messages:a}),e.state.socket.emit("message",t)}},e.sendTyping=function(){e.state.socket.emit("typing",e.state.contact._id)},e.updateUserState=function(t){var a=e.state.contacts;a.forEach((function(e,s){t[e._id]&&(a[s].status=t[e._id])})),e.setState({contacts:a});var s=e.state.contact;t[s._id]&&(s.status=t[s._id]),e.setState({contact:s})},e.toggleShowProfile=function(){e.setState({showProfile:!e.state.showProfile})},e.toggleShowProfileEdit=function(){e.setState({showProfileEdit:!e.state.showProfileEdit})},e.logout=function(){e.state.socket.disconnect(),K.logout(),e.props.history.push("/")},e.renderChat=function(){var t=e.state,a=t.contact,s=t.user;if(a){var n=e.state.messages.filter((function(e){return e.sender===a._id||e.receiver===a._id}));return Object(b.jsx)(D,{user:s,messages:n})}},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.intiSocketConnection()}},{key:"render",value:function(){return this.state.connected&&this.state.user?Object(b.jsxs)(m.a,{className:"h-100",children:[Object(b.jsxs)("div",{id:"contacts-section",className:"col-6 col-md-4",children:[Object(b.jsx)(O,{user:this.state.user,toggleShowProfileEdit:this.toggleShowProfileEdit}),Object(b.jsx)(C,{contacts:this.state.contacts,messages:this.state.messages,onChatNavigate:this.onChatNavigate}),Object(b.jsx)(q,{contact:this.state.contact,toggleShowProfile:this.toggleShowProfile,open:this.state.showProfile}),Object(b.jsx)(Z,{user:this.state.user,toggleShowProfileEdit:this.toggleShowProfileEdit,open:this.state.showProfileEdit})]}),Object(b.jsxs)("div",{id:"messages-section",className:"col-6 col-md-8",children:[Object(b.jsx)(T,{contact:this.state.contact,typing:this.state.typing,toggle:this.userProfileToggle,logout:this.logout,toggleShowProfile:this.toggleShowProfile}),this.renderChat(),Object(b.jsx)(M,{sender:this.sendMessage,sendTyping:this.sendTyping})]})]}):Object(b.jsx)(h.a,{id:"loader",color:"success"})}}]),a}(n.a.Component),Q=function(){return Object(b.jsx)("h3",{children:"Page Not Found"})},L=a(37),_=a.n(L),z=a(46),H=a(29),W=a(197),$=function(e){var t=Object(s.useState)(""),a=Object(H.a)(t,2),n=a[0],c=a[1],r=Object(s.useState)(""),i=Object(H.a)(r,2),l=i[0],u=i[1],d=Object(s.useState)(""),j=Object(H.a)(d,2),h=j[0],m=j[1],p=Object(s.useState)(""),f=Object(H.a)(p,2),O=f[0],x=f[1],v=function(){var t=Object(z.a)(_.a.mark((function t(a){var s,c;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,s={name:n,username:l,password:h},t.next=5,V.a.post("".concat("http://localhost:3001","/api/auth/register"),s);case 5:c=t.sent,K.login(c.data),e.history.push("/"),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),x(t.t0.response.data.message);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}();return Object(b.jsx)(W.a,{className:"auth px-2 col-lg-4 col-sm-6",children:Object(b.jsxs)(R.a,{onSubmit:v,children:[Object(b.jsx)("h5",{className:"my-4",children:"\u0625\u0646\u0634\u0627\u0621 \u062d\u0633\u0627\u0628 \u062c\u062f\u064a\u062f"}),Object(b.jsx)(g,{error:O}),Object(b.jsx)(y.a,{value:n,name:"name",onChange:function(e){c(e.target.value),x("")},placeholder:"\u0627\u0644\u0627\u0633\u0645",required:!0,autoFocus:!0}),Object(b.jsx)(y.a,{value:l,username:"username",onChange:function(e){u(e.target.value),x("")},placeholder:"\u0627\u0633\u0645 \u0627\u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645",required:!0}),Object(b.jsx)(y.a,{type:"password",value:h,password:"password",onChange:function(e){m(e.target.value),x("")},placeholder:"\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631",required:!0}),Object(b.jsx)("div",{children:Object(b.jsx)(G.a,{color:"primary",block:!0,className:"mb-3 px-4",children:" \u0625\u0646\u0634\u0627\u0621 "})}),Object(b.jsx)("small",{children:Object(b.jsx)(o.b,{to:"/login",children:"\u062a\u0633\u062c\u064a\u0644 \u062f\u062e\u0648\u0644"})}),Object(b.jsxs)("p",{className:"m-3 text-muted",children:["\xa9 ",(new Date).getFullYear()]})]})})},ee=function(e){var t=Object(s.useState)(""),a=Object(H.a)(t,2),n=a[0],c=a[1],r=Object(s.useState)(""),i=Object(H.a)(r,2),l=i[0],u=i[1],d=Object(s.useState)(""),j=Object(H.a)(d,2),h=j[0],m=j[1],p=function(){var t=Object(z.a)(_.a.mark((function t(a){var s,c;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,s={username:n,password:l},t.next=5,V.a.post("".concat("http://localhost:3001","/api/auth"),s);case 5:c=t.sent,K.login(c.data),e.history.push("/"),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),m(t.t0.response.data.message);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}();return Object(b.jsx)(W.a,{className:"auth px-2 col-lg-4 col-sm-6",children:Object(b.jsxs)(R.a,{onSubmit:p,children:[Object(b.jsx)("h5",{className:"my-4",children:" \u062a\u0633\u062c\u064a\u0644 \u062f\u062e\u0648\u0644"}),Object(b.jsx)(g,{error:h}),Object(b.jsx)(y.a,{value:n,username:"username",onChange:function(e){c(e.target.value),m("")},placeholder:"\u0627\u0633\u0645 \u0627\u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645",required:!0}),Object(b.jsx)(y.a,{type:"password",value:l,password:"password",onChange:function(e){u(e.target.value),m("")},placeholder:"\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631",required:!0}),Object(b.jsx)("div",{children:Object(b.jsx)(G.a,{color:"primary",block:!0,className:"mb-3 px-4",children:" \u062a\u0633\u062c\u064a\u0644 \u062f\u062e\u0648\u0644"})}),Object(b.jsx)("small",{children:Object(b.jsx)(o.b,{to:"/register",children:" \u0625\u0646\u0634\u0627\u0621 \u062d\u0633\u0627\u0628"})}),Object(b.jsxs)("p",{className:"m-3 text-muted",children:["\xa9 ",(new Date).getFullYear()]})]})})},te=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var s=arguments.length,n=new Array(s),c=0;c<s;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={password:"",newPassword:""},e.onChange=function(t){var a;return e.setState((a={},Object(F.a)(a,t.target.name,t.target.value),Object(F.a)(a,"error",null),a))},e.onSubmit=function(t){t.preventDefault();var a={password:e.state.password,newPassword:e.state.newPassword};V.a.post("".concat("http://localhost:3001","/api/account/password"),a).then((function(t){e.props.history.push("/")})).catch((function(t){e.setState({error:t.response.data.message})}))},e}return Object(u.a)(a,[{key:"render",value:function(){return Object(b.jsx)(W.a,{className:"auth col-lg-3 col-sm-6",children:Object(b.jsxs)(R.a,{onSubmit:this.onSubmit,children:[Object(b.jsx)("h5",{className:"mb-4",children:"\u062a\u063a\u064a\u064a\u0631 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631"}),Object(b.jsx)(g,{error:this.state.error}),Object(b.jsx)(y.a,{type:"password",value:this.state.password,name:"password",onChange:this.onChange,placeholder:"\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u0627\u0644\u062d\u0627\u0644\u064a\u0629",required:!0}),Object(b.jsx)(y.a,{type:"password",value:this.state.newPassword,name:"newPassword",onChange:this.onChange,placeholder:"\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u0627\u0644\u062c\u062f\u064a\u062f\u0629",required:!0}),Object(b.jsx)(G.a,{block:!0,className:"mb-3",children:" \u062a\u063a\u064a\u064a\u0631 "}),Object(b.jsx)("small",{children:Object(b.jsx)(o.b,{to:"/",children:"\u0639\u0648\u062f\u0629"})}),Object(b.jsxs)("p",{className:"m-3 mb-3 text-muted",children:["\xa9 ",(new Date).getFullYear()]})]})})}}]),a}(n.a.Component),ae=a(48),se=a(106),ne=["component","can","redirect"],ce=function(e){var t=e.component,a=e.can,s=void 0===a?function(){return!0}:a,n=e.redirect,c=Object(se.a)(e,ne);return console.log("component",t),console.log("can",s()),Object(b.jsx)(i.b,Object(ae.a)(Object(ae.a)({},c),{},{render:function(e){return s()?Object(b.jsx)(t,Object(ae.a)({},e)):Object(b.jsx)(i.a,{to:n})}}))};var re=function(){return Object(s.useEffect)((function(){K.init()}),[]),Object(b.jsx)("div",{id:"main-container",className:"container-fluid",children:Object(b.jsx)(o.a,{children:Object(b.jsxs)(i.d,{children:[Object(b.jsx)(ce,{path:"/",exact:!0,component:Y,can:K.auth,redirect:"/login"}),Object(b.jsx)(ce,{path:"/password",exact:!0,component:te,can:K.auth,redirect:"/login"}),Object(b.jsx)(ce,{path:"/register",component:$,can:K.guest,redirect:"/"}),Object(b.jsx)(ce,{path:"/login",component:ee,can:K.guest,redirect:"/"}),Object(b.jsx)(o.a,{component:Q})]})})})},oe=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,202)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),s(e),n(e),c(e),r(e)}))};r.a.render(Object(b.jsx)(n.a.StrictMode,{children:Object(b.jsx)(re,{})}),document.getElementById("root")),oe()}},[[189,1,2]]]);
//# sourceMappingURL=main.7b93b5e1.chunk.js.map