{"version":3,"sources":["components/Error.js","components/Avatar.js","assets/avatar.png","components/chat/ContactHeader.js","components/chat/Contact.js","components/chat/Contacts.js","components/chat/ChatHeader.js","components/chat/Message.js","components/chat/Messages.js","components/chat/MessageForm.js","components/side/UserProfile.js","components/side/EditProfile.js","Auth.js","views/Chat.js","views/NotFound.js","views/Register.js","views/Login.js","views/Password.js","AppRoute.js","App.js","reportWebVitals.js","index.js"],"names":["Error","props","error","Alert","color","Avatar","src","file","className","alt","ContactHeader","Row","user","avatar","onClick","toggleShowProfileEdit","Contact","contact","status","name","message","content","moment","date","format","unseen","Badge","Contacts","state","search","onSearch","e","setState","target","value","renderContact","index","includes","messages","filter","sender","_id","receiver","lastMessage","length","seen","onChatNavigate","bind","Input","onChange","this","placeholder","id","contacts","map","React","Component","withRouter","toggleShowProfile","typing","fromNow","Nav","navbar","UncontrolledDropdown","DropdownToggle","tag","DropdownMenu","DropdownItem","history","push","divider","logout","Message","outgoing","Messages","renderMessage","MessageForm","lastType","onSend","Date","getTime","onKeyDown","key","shiftKey","sendTyping","preventDefault","type","rows","UserProfile","open","about","EditProfile","showFileUpload","fileUpload","current","click","onImageChange","files","image","URL","createObjectURL","onSubmit","data","FormData","append","axios","post","then","catch","err","response","onClose","createRef","style","overflow","Form","ref","required","autoComplete","Button","block","Auth","login","localStorage","setItem","JSON","stringify","defaults","headers","common","token","init","parse","getItem","auth","guest","removeItem","getToken","setUser","updatedUser","Chat","showProfile","showProfileEdit","socket","emit","forEach","intiSocketConnection","io","process","query","on","connected","users","updateUserState","concat","onUpdateUser","onTypingMessage","histroy","clearTimeout","timeout","setTimeout","typingTimeout","sendMessage","disconnect","renderChat","toggle","userProfileToggle","Spinner","NotFound","Register","useState","setName","username","setUsername","password","setPassword","setError","formSubmit","event","a","result","Card","autoFocus","to","getFullYear","Login","Password","newPassword","res","AppRoute","component","can","redirect","rest","console","log","render","App","useEffect","path","exact","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.7b93b5e1.chunk.js","sourcesContent":["import {Alert} from 'reactstrap';\r\nconst Error = props => (\r\n  props.error ? <Alert color=\"danger\">{props.error}</Alert> : ''\r\n);\r\n\r\nexport default Error;","import React from 'react';\r\nimport avatar from 'assets/avatar.png';\r\n\r\nconst Avatar = (props) => {\r\n  const src = props.src ? `uploads/${props.src}` : avatar;\r\n  return (\r\n    <img src={props.file || src} className=\"img-fluid rounded-circle ml-3 avatar\" alt=\"user avatar\" />\r\n  )\r\n}\r\n\r\nexport default Avatar;","export default \"data:image/png;base64,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\"","import {Row} from 'reactstrap';\r\nimport { Avatar } from 'components';\r\n\r\nconst ContactHeader = (props) => {\r\n  return (\r\n    <Row className='heading'>\r\n      <Avatar src={props.user.avatar}/>\r\n      <div>جهات الاتصال</div>\r\n      <div className='mr-auto nav-link' onClick={props.toggleShowProfileEdit}>\r\n        <i className='fa fa-bars'/>\r\n      </div>\r\n    </Row>\r\n  );\r\n}\r\n\r\nexport default ContactHeader;","import React from \"react\";\r\nimport Avatar from \"components/Avatar\";\r\nimport moment from 'moment';\r\nimport { Badge } from 'reactstrap';\r\n\r\n/**\r\n * Contact Item.\r\n */\r\nconst Contact = props => (\r\n   <div className=\"contact\">\r\n       <div>\r\n           <Avatar src={props.contact.avatar} />\r\n           {props.contact.status === true ? <i className='fa fa-circle online' /> : ''}\r\n       </div>\r\n\r\n       <div className=\"w-50\">\r\n           <div className=\"name\">{props.contact.name}</div>\r\n           <div className=\"small last-message\">\r\n               {props.message ? props.message.content : 'انقر هنا لبدء المحادثة' }\r\n           </div>\r\n       </div>\r\n       \r\n       <div className=\"flex-grow-1 text-left\">\r\n           <div className=\"small text-muted\">\r\n               {props.message ? moment(props.message.date).format(\"hh:mm a\") : ''}\r\n           </div>\r\n           { props.unseen > 0 ? <Badge color=\"success\">{props.unseen}</Badge> : ''}\r\n       </div>\r\n   </div>\r\n);\r\n\r\nexport default Contact;","import React from \"react\";\r\nimport Contact from \"./Contact\";\r\nimport { Row, Input } from 'reactstrap';\r\n\r\nclass Contacts extends React.Component {\r\n\r\n  state = { search: '' };\r\n\r\n  onSearch = e => this.setState({ search: e.target.value });\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"list\">\r\n        <Row className=\"search\">\r\n          <Input onChange={this.onSearch} placeholder=\"بحث\" />\r\n        </Row>\r\n\r\n        <Row id=\"contacts\">\r\n          {this.props.contacts.map((contact, index) => this.renderContact(contact, index))}\r\n        </Row>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderContact = (contact, index) => {\r\n    if (!contact.name.includes(this.state.search)) return;\r\n    const messages = this.props.messages.filter(e => e.sender === contact._id || e.receiver === contact._id);\r\n    const lastMessage = messages[messages.length - 1];\r\n    const unseen = messages.filter(message => !message.seen && message.sender === contact._id).length;\r\n    \r\n    return (\r\n      <div className=\"w-100\" \r\n        key={index} \r\n        onClick={this.props.onChatNavigate.bind(this, contact)} >\r\n          <Contact \r\n            contact={contact} \r\n            message={lastMessage} \r\n            unseen={unseen} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Contacts;","import React from \"react\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport Avatar from \"components/Avatar\";\r\nimport { Row, DropdownItem, DropdownMenu, DropdownToggle, Nav, UncontrolledDropdown } from \"reactstrap\";\r\nimport moment from 'moment';\r\n\r\nconst ChatHeader = props => {\r\n  const status = () => {\r\n    if (props.typing) return 'يكتب الآن';\r\n    if (props.contact.status === true) return 'متصل الآن';\r\n    if (props.contact.status) return moment(props.contact.status).fromNow();\r\n  };\r\n\r\n  return (\r\n    <Row className=\"heading m-0\">\r\n      <div onClick={props.toggleShowProfile}>\r\n        <Avatar src={props.contact.avatar}/>\r\n      </div>\r\n\r\n      <div className=\"text-right\">\r\n        <div>{props.contact ? props.contact.name : ''}</div>\r\n        <small>{status()}</small>\r\n      </div>\r\n\r\n      <Nav className=\"mr-auto\" navbar>\r\n        <UncontrolledDropdown>\r\n          <DropdownToggle tag=\"a\" className=\"nav-link\">\r\n            <i className=\"fa fa-ellipsis-v\" />\r\n          </DropdownToggle>\r\n\r\n          <DropdownMenu>\r\n            <DropdownItem onClick={e => props.history.push('/password')}>تغيير كلمة المرور</DropdownItem>\r\n            <DropdownItem divider />\r\n            <DropdownItem onClick={props.logout}>تسجيل الخروج</DropdownItem>\r\n          </DropdownMenu>\r\n        </UncontrolledDropdown>\r\n      </Nav>\r\n    </Row>\r\n  );\r\n};\r\n\r\nexport default withRouter(ChatHeader);","import React from 'react';\r\nimport moment from 'moment';\r\n\r\nconst Message = (props) => {\r\n  return (\r\n    <div className={props.message.outgoing ? 'message-item' : 'message-item incoming'}>\r\n      <div className=\"d-flex flex-row\">\r\n        <div className=\"body m-1 mr-2\">\r\n          <div>{props.message.content}</div>\r\n          <span className=\"small text-muted\">\r\n            {moment(props.message.date).format('hh:mm a | MMMMD')}\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Message;","import React from \"react\";\r\nimport Message from \"./Message\";\r\n\r\nclass Messages extends React.Component {\r\n  render() {\r\n    return (\r\n      <div id=\"messages\">\r\n        {this.props.messages.map(this.renderMessage)}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderMessage = (message, index) => {\r\n    message.outgoing = message.receiver !== this.props.user._id;\r\n    return <Message key={index} message={message} />\r\n  };\r\n\r\n}\r\n\r\nexport default Messages;","import React from \"react\";\r\nimport { Input } from \"reactstrap\";\r\nimport moment from \"moment\";\r\n\r\nclass MessageForm extends React.Component {\r\n\r\n  state = { \r\n    message: '',\r\n    lastType: false\r\n  };\r\n\r\n  onChange = e => this.setState({ message: e.target.value });\r\n\r\n  onSend = e => {\r\n    if (!this.state.message) return;\r\n    \r\n    const message = {\r\n      content: this.state.message,\r\n      date: new Date().getTime()\r\n    };\r\n\r\n    this.props.sender(message);\r\n    this.setState({ message: '' });\r\n  };\r\n\r\n  onKeyDown = (e) => {\r\n    if (e.key === 'Enter' && !e.shiftKey) {\r\n      this.setState({lastType: false});\r\n      this.onSend();\r\n      e.preventDefault();\r\n\r\n    } else if (!this.state.lastType || moment() - this.state.lastType > 2000) {\r\n      this.setState({lastType: moment()});\r\n      this.props.sendTyping();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div id=\"send-message\">\r\n        <Input type=\"textarea\" rows=\"1\" onKeyDown={this.onKeyDown} onChange={this.onChange} value={this.state.message} placeholder=\"اكتب رسالتك هنا\" />\r\n        <i className=\"btn text-muted px-3 send\" onClick={this.onSend}>send</i>\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nexport default MessageForm;","import Avatar from 'components/Avatar';\r\nimport { Row } from 'reactstrap';\r\n\r\nconst UserProfile = (props) => (\r\n  <div className={props.open ? 'side-profile open' : 'side-profile'}>\r\n    <Row className='heading'>\r\n      <div className='mr-2 nav-link' onClick={props.toggleShowProfile}>\r\n        <i className='fa fa-arrow-right' />\r\n      </div>\r\n\r\n      <div>{props.contact.name}</div>\r\n    </Row>\r\n\r\n    <div className='d-flex flex-column overflow-auto'>\r\n      <Avatar src={props.contact.avatar} />\r\n\r\n      <div className='bg-white px-3 py-2'>\r\n        <label className='text-muted'> رسالة الحالة </label>\r\n        <p>{props.contact.about ? props.contact.about : 'أهلا بك'}</p>\r\n      </div>\r\n    </div>\r\n  </div>\r\n)\r\n\r\nexport default UserProfile;","import React from \"react\";\r\nimport { Row, Form, Input, Button } from \"reactstrap\";\r\nimport Error from \"components/Error\";\r\nimport Avatar from 'components/Avatar';\r\nimport axios from \"axios\";\r\n\r\nclass EditProfile extends React.Component {\r\n  state = {\r\n    name: this.props.user.name,\r\n    about: this.props.user.about,\r\n    avatar: this.props.avatar\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.fileUpload = React.createRef();\r\n  }\r\n\r\n  showFileUpload = e => this.fileUpload.current.click();\r\n\r\n  onImageChange = e => {\r\n    if (e.target.files && e.target.files[0]) {\r\n      this.setState({\r\n        image: URL.createObjectURL(e.target.files[0]),\r\n        avatar: e.target.files[0]\r\n      });\r\n    }\r\n  };\r\n\r\n  onChange = e => this.setState({ [e.target.name]: e.target.value, error: null });\r\n\r\n  onSubmit = e => {\r\n    e.preventDefault();\r\n    const data = new FormData();\r\n\r\n    data.append('name', this.state.name);\r\n    data.append('about', this.state.about);\r\n    if (this.state.avatar) {\r\n      data.append('avatar', this.state.avatar, this.state.avatar.name);\r\n    }\r\n\r\n    axios.post('/api/account', data)\r\n      .then(this.props.toggleShowProfileEdit())\r\n      .catch(err => this.setState({\r\n        error: err.response.data.message\r\n      }));\r\n  };\r\n\r\n  onClose = e => {\r\n    this.setState({\r\n      image: false,\r\n      name: this.props.user.name,\r\n      about: this.props.user.about\r\n    });\r\n\r\n    this.props.toggleShowProfileEdit();\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className={this.props.open ? 'side-profile open' : 'side-profile'}>\r\n\r\n        <Row className=\"heading\">\r\n          <div className=\"mr-2 nav-link\" onClick={this.onClose}>\r\n            <i className=\"fa fa-arrow-right\" />\r\n          </div>\r\n          <div>الملف الشخصي</div>\r\n        </Row>\r\n\r\n        <div className=\"d-flex flex-column\" style={{ overflow: 'auto' }}>\r\n          <Form onSubmit={this.onSubmit}>\r\n            <Error error={this.state.error} />\r\n\r\n            <div className=\"text-center\" onClick={this.showFileUpload}>\r\n              <Avatar src={this.props.user.avatar} file={this.state.image} />\r\n            </div>\r\n\r\n            <input type=\"file\" ref={this.fileUpload} onChange={this.onImageChange} className=\"d-none\" name=\"avatar\" />\r\n\r\n            <div className=\"bg-white px-4 py-2\">\r\n              <label className=\"text-muted\">الاسم</label>\r\n              <Input value={this.state.name} name=\"name\" onChange={this.onChange} required autoComplete=\"off\" />\r\n            </div>\r\n\r\n            <div className=\"bg-white px-3 py-2\">\r\n              <label className=\"text-muted\">رسالة الحالة</label>\r\n              <Input value={this.state.about} name=\"about\" onChange={this.onChange} required autoComplete=\"off\" />\r\n            </div>\r\n\r\n            <div className=\"bg-white px-3 py-2\">\r\n              <Button block className=\"mt-3\">حفظ</Button>\r\n            </div>\r\n\r\n          </Form>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default EditProfile;","import axios from \"axios\";\r\n\r\nconst Auth = {\r\n  login: user => {\r\n    localStorage.setItem('user', JSON.stringify(user));\r\n    axios.defaults.headers.common['Authorization'] = user.token;\r\n  },\r\n\r\n  init: () => {\r\n    const user = JSON.parse(localStorage.getItem('user'));\r\n    axios.defaults.headers.common['Authorization'] = user ? user.token : '';\r\n  },\r\n\r\n  auth: () => {\r\n    return localStorage.getItem('user') !== null;\r\n  },\r\n  \r\n  guest: () => {\r\n    return localStorage.getItem('user') === null || localStorage.getItem('user') === 'undefined';\r\n  },\r\n\r\n  logout: () => {\r\n    delete axios.defaults.headers.common['Authorization'];\r\n    localStorage.removeItem('user');\r\n    return;\r\n  },\r\n\r\n  getToken: () => {\r\n    const user = JSON.parse(localStorage.getItem('user'));\r\n    return user ? user.token : '';\r\n  },\r\n\r\n  setUser: (updatedUser) => {\r\n    const user = JSON.parse(localStorage.getItem('user'));\r\n    updatedUser.token = user.token;\r\n\r\n    localStorage.setItem('user', JSON.stringify(updatedUser)); \r\n  }\r\n}\r\n\r\nexport default Auth;","import React from 'react';\r\nimport { Row, Spinner } from 'reactstrap';\r\nimport {\r\n  ContactHeader,\r\n  Contacts,\r\n  ChatHeader,\r\n  Messages,\r\n  MessageForm,\r\n  UserProfile,\r\n  EditProfile\r\n} from 'components';\r\nimport io from 'socket.io-client';\r\nimport Auth from 'Auth';\r\n\r\nclass Chat extends React.Component {\r\n  state = {\r\n    contacts: [],\r\n    messages: [],\r\n    contact: {},\r\n    showProfile: false,\r\n    showProfileEdit: false\r\n  };\r\n\r\n  onChatNavigate = contact => {\r\n    this.setState({ contact })\r\n    this.state.socket.emit('seen', contact._id);\r\n\r\n    let messages = this.state.messages;\r\n    messages.forEach((message, index) => {\r\n      if (message.sender === contact._id) messages[index].seen = true;\r\n    });\r\n\r\n    this.setState({ messages });\r\n  }\r\n\r\n  intiSocketConnection = () => {\r\n    const socket = io(process.env.REACT_APP_SOCKET, {\r\n      query: `token=${Auth.getToken()}`\r\n    });\r\n\r\n    this.setState({ socket });\r\n\r\n    socket.on('connect', () => {\r\n      this.setState({ connected: true });\r\n    });\r\n\r\n    socket.on('data', (user, contacts, messages, users) => {\r\n      const contact = contacts[0] || {};\r\n      this.setState({ user, contact, contacts, messages }, () => {\r\n        this.updateUserState(users);\r\n      });\r\n    });\r\n\r\n    socket.on('message', (message) => {\r\n      if (message.sender === this.state.contact._id) {\r\n        this.setState({ typing: false });\r\n        this.state.socket.emit('seen', this.state.contact._id);\r\n\r\n        message.seen = true;\r\n      }\r\n\r\n      const messages = this.state.messages.concat(message);\r\n      this.setState({ messages });\r\n    });\r\n\r\n    socket.on('disconnect', () => {\r\n      this.setState({ connected: false });\r\n    });\r\n\r\n    socket.on('new_user', (contact) => {\r\n      this.setState({\r\n        contacts: this.state.contacts.concat(contact)\r\n      });\r\n    });\r\n\r\n    socket.on('user_status', (users) => {\r\n      this.updateUserState(users);\r\n    });\r\n\r\n    socket.on('user_updated', (user) => {\r\n      this.onUpdateUser(user);\r\n    });\r\n\r\n    socket.on('new_message', (message) => {\r\n      this.setState({\r\n        messages: this.state.messages.concat(message)\r\n      });\r\n    });\r\n\r\n    socket.on('typing', this.onTypingMessage);\r\n\r\n\r\n    socket.on('error', err => {\r\n      if (err === 'Unauthenticated') {\r\n        Auth.logout();\r\n        this.props.histroy.push('/');\r\n      }\r\n    });\r\n  }\r\n\r\n  onUpdateUser = (user) => {\r\n    if (this.state.user._id === user._id) {\r\n      this.setState({ user });\r\n      Auth.setUser(user)\r\n\r\n      return;\r\n    }\r\n\r\n    const contacts = this.state.contacts;\r\n\r\n    contacts.forEach((contact, index) => {\r\n      if (contact._id === user._id) {\r\n        contacts[index] = user;\r\n        contacts[index].status = contact.status;\r\n      }\r\n    });\r\n\r\n    this.setState({ contacts });\r\n\r\n    if (this.state.contact._id === user._id) {\r\n      this.setState({ contact: user });\r\n    }\r\n  }\r\n\r\n  onTypingMessage = (sender) => {\r\n    if (this.state.contact._id !== sender) return;\r\n    this.setState({ typing: sender });\r\n\r\n    clearTimeout(this.state.timeout);\r\n    const timeout = setTimeout(this.typingTimeout, 3000);\r\n    this.setState({ timeout });\r\n  }\r\n\r\n  typingTimeout = () => this.setState({ typing: false });\r\n\r\n  sendMessage = (message) => {\r\n    if (!this.state.contact._id) return;\r\n\r\n    message.receiver = this.state.contact._id;\r\n    const messages = this.state.messages.concat(message);\r\n\r\n    this.setState({ messages });\r\n    this.state.socket.emit('message', message);\r\n  }\r\n\r\n  sendTyping = () => {\r\n    this.state.socket.emit('typing', this.state.contact._id);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.intiSocketConnection();\r\n  }\r\n\r\n  updateUserState = (users) => {\r\n    let contacts = this.state.contacts;\r\n\r\n    contacts.forEach((contact, index) => {\r\n      if (users[contact._id]) {\r\n        contacts[index].status = users[contact._id]\r\n      }\r\n    });\r\n\r\n    this.setState({ contacts });\r\n\r\n    const contact = this.state.contact;\r\n    if (users[contact._id]) {\r\n      contact.status = users[contact._id];\r\n    }\r\n\r\n    this.setState({ contact });\r\n  }\r\n\r\n  toggleShowProfile = () => {\r\n    this.setState({\r\n      showProfile: !this.state.showProfile\r\n    });\r\n  }\r\n\r\n  toggleShowProfileEdit = () => {\r\n    this.setState({\r\n      showProfileEdit: !this.state.showProfileEdit\r\n    });\r\n  }\r\n\r\n  logout = () => {\r\n    this.state.socket.disconnect();\r\n    Auth.logout();\r\n    this.props.history.push('/');\r\n  };\r\n\r\n  render() {\r\n    if (!this.state.connected || !this.state.user) {\r\n      return <Spinner id='loader' color='success' />\r\n    }\r\n\r\n    return (\r\n      <Row className=\"h-100\">\r\n        <div id=\"contacts-section\" className=\"col-6 col-md-4\" >\r\n          <ContactHeader\r\n            user={this.state.user}\r\n            toggleShowProfileEdit={this.toggleShowProfileEdit}\r\n          />\r\n\r\n          <Contacts\r\n            contacts={this.state.contacts}\r\n            messages={this.state.messages}\r\n            onChatNavigate={this.onChatNavigate}\r\n          />\r\n\r\n          <UserProfile\r\n            contact={this.state.contact}\r\n            toggleShowProfile={this.toggleShowProfile}\r\n            open={this.state.showProfile}\r\n          />\r\n\r\n          <EditProfile\r\n            user={this.state.user}\r\n            toggleShowProfileEdit={this.toggleShowProfileEdit}\r\n            open={this.state.showProfileEdit}\r\n          />\r\n        </div>\r\n\r\n        <div id=\"messages-section\" className=\"col-6 col-md-8\">\r\n          <ChatHeader\r\n            contact={this.state.contact}\r\n            typing={this.state.typing}\r\n            toggle={this.userProfileToggle}\r\n            logout={this.logout}\r\n            toggleShowProfile={this.toggleShowProfile}\r\n          />\r\n\r\n          {this.renderChat()}\r\n\r\n          <MessageForm sender={this.sendMessage} sendTyping={this.sendTyping} />\r\n        </div>\r\n      </Row>\r\n    );\r\n  }\r\n\r\n  renderChat = () => {\r\n    const { contact, user } = this.state;\r\n    if (!contact) return;\r\n\r\n    const messages = this.state.messages.filter(message => message.sender === contact._id || message.receiver === contact._id);\r\n    return <Messages user={user} messages={messages} />\r\n  };\r\n\r\n}\r\n\r\nexport default Chat;","const NotFound = () => (\r\n  <h3>Page Not Found</h3>\r\n);\r\n\r\nexport default NotFound;","\r\nimport axios from 'axios';\r\nimport Auth from 'Auth';\r\nimport { useState } from 'react';\r\nimport { Card, Form, Button, Input } from 'reactstrap';\r\nimport { Error } from 'components';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst Register = (props) => {\r\n  const [name, setName] = useState('');\r\n  const [username, setUsername] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [error, setError] = useState('');\r\n\r\n  const nameChanged = (event) => {\r\n    setName(event.target.value);\r\n    setError('');\r\n  }\r\n\r\n  const usernameChanged = (event) => {\r\n    setUsername(event.target.value);\r\n    setError('');\r\n  }\r\n\r\n  const passwordChanged = (event) => {\r\n    setPassword(event.target.value);\r\n    setError('');\r\n  }\r\n\r\n  const formSubmit = async (event) => {\r\n    event.preventDefault();\r\n\r\n    try {\r\n      const data = {\r\n        name,\r\n        username,\r\n        password\r\n      }\r\n  \r\n      const result = await axios.post(`${process.env.REACT_APP_BACKEND_URL}/api/auth/register`, data);\r\n      Auth.login(result.data);\r\n\r\n      props.history.push('/');\r\n\r\n    } catch (error) {\r\n      setError(error.response.data.message);\r\n    }\r\n\r\n  }\r\n\r\n  return (\r\n    <Card className=\"auth px-2 col-lg-4 col-sm-6\">\r\n      <Form onSubmit={formSubmit}>\r\n        <h5 className=\"my-4\" >إنشاء حساب جديد</h5>\r\n        <Error error={error} />\r\n\r\n        <Input value={name} name=\"name\" onChange={nameChanged} placeholder=\"الاسم\" required autoFocus />\r\n        <Input value={username} username=\"username\" onChange={usernameChanged} placeholder=\"اسم االمستخدم\" required />\r\n        <Input type=\"password\" value={password} password=\"password\" onChange={passwordChanged} placeholder=\"كلمة المرور\" required />\r\n\r\n        <div>\r\n          <Button color=\"primary\" block className=\"mb-3 px-4\" > إنشاء </Button>\r\n        </div>\r\n        <small><Link to=\"/login\">تسجيل دخول</Link></small>\r\n\r\n        <p className=\"m-3 text-muted\">&copy; { new Date().getFullYear() }</p>\r\n      </Form>\r\n    </Card>\r\n  );\r\n}\r\n\r\nexport default Register;","\r\nimport axios from 'axios';\r\nimport Auth from 'Auth';\r\nimport { useState } from 'react';\r\nimport { Card, Form, Button, Input } from 'reactstrap';\r\nimport { Error } from 'components';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst Login = (props) => {\r\n  const [username, setUsername] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [error, setError] = useState('');\r\n\r\n  const usernameChanged = (event) => {\r\n    setUsername(event.target.value);\r\n    setError('');\r\n  }\r\n\r\n  const passwordChanged = (event) => {\r\n    setPassword(event.target.value);\r\n    setError('');\r\n  }\r\n\r\n  const formSubmit = async (event) => {\r\n    event.preventDefault();\r\n\r\n    try {\r\n      const data = {\r\n        username,\r\n        password\r\n      }\r\n  \r\n      const result = await axios.post(`${process.env.REACT_APP_BACKEND_URL}/api/auth`, data);\r\n      Auth.login(result.data);\r\n\r\n      props.history.push('/');\r\n\r\n    } catch (error) {\r\n      setError(error.response.data.message);\r\n    }\r\n\r\n  }\r\n\r\n  return (\r\n    <Card className=\"auth px-2 col-lg-4 col-sm-6\">\r\n      <Form onSubmit={formSubmit}>\r\n        <h5 className=\"my-4\" > تسجيل دخول</h5>\r\n        <Error error={error} />\r\n\r\n        <Input value={username} username=\"username\" onChange={usernameChanged} placeholder=\"اسم االمستخدم\" required />\r\n        <Input type=\"password\" value={password} password=\"password\" onChange={passwordChanged} placeholder=\"كلمة المرور\" required />\r\n\r\n        <div>\r\n          <Button color=\"primary\" block className=\"mb-3 px-4\" > تسجيل دخول</Button>\r\n        </div>\r\n        <small><Link to=\"/register\"> إنشاء حساب</Link></small>\r\n\r\n        <p className=\"m-3 text-muted\">&copy; { new Date().getFullYear() }</p>\r\n      </Form>\r\n    </Card>\r\n  );\r\n}\r\n\r\nexport default Login;","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Card, Form, Input, Button } from \"reactstrap\";\r\nimport { Error } from \"components\";\r\nimport axios from \"axios\";\r\n\r\nclass Password extends React.Component {\r\n\r\n  state = { \r\n    password: '', \r\n    newPassword: '' \r\n  };\r\n\r\n  onChange = e => this.setState({\r\n    [e.target.name]: e.target.value, error: null\r\n  });\r\n\r\n  onSubmit = e => {\r\n    e.preventDefault();\r\n    let data = { password: this.state.password, newPassword: this.state.newPassword };\r\n    axios.post(`${process.env.REACT_APP_BACKEND_URL}/api/account/password`, data)\r\n      .then(res => {\r\n        this.props.history.push('/')\r\n      })\r\n      .catch(err => {\r\n        this.setState({ error: err.response.data.message });\r\n      });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <Card className=\"auth col-lg-3 col-sm-6\">\r\n        <Form onSubmit={this.onSubmit}>\r\n          <h5 className=\"mb-4\">تغيير كلمة المرور</h5>\r\n\r\n          <Error error={this.state.error} />\r\n         \r\n          <Input type=\"password\" value={this.state.password} name=\"password\" onChange={this.onChange} placeholder=\"كلمة المرور الحالية\" required />\r\n          <Input type=\"password\" value={this.state.newPassword} name=\"newPassword\" onChange={this.onChange} placeholder=\"كلمة المرور الجديدة\" required />\r\n          <Button block className=\"mb-3\"> تغيير </Button>\r\n          \r\n          <small><Link to=\"/\">عودة</Link></small>\r\n          <p className=\"m-3 mb-3 text-muted\">&copy; {new Date().getFullYear()}</p>\r\n        </Form>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nexport default Password;","import {Route, Redirect} from 'react-router-dom';\r\n\r\nconst AppRoute = ({component: Component, can = () => true, redirect, ...rest}) => {\r\n  console.log('component', Component)\r\n  console.log('can', can())\r\n\r\n  return (\r\n    <Route {...rest} render = {(props) => {\r\n      return (\r\n        can() ? <Component {...props} /> : <Redirect to={redirect} />\r\n      );\r\n    }} />\r\n  );\r\n}\r\n\r\nexport default AppRoute;","import { BrowserRouter as Router, Switch } from 'react-router-dom';\nimport { useEffect } from 'react';\nimport './App.css';\nimport {Chat, Register, Login, Password} from './views';\nimport NotFound from './views/NotFound';\nimport Auth from 'Auth';\nimport AppRoute from 'AppRoute';\n\nfunction App() {\n  useEffect(() => {\n    Auth.init();\n  }, [])\n\n  return (\n    <div id=\"main-container\" className=\"container-fluid\">\n      <Router>\n        <Switch>\n          <AppRoute path='/' exact component={Chat} can={Auth.auth} redirect='/login'/>\n          <AppRoute path='/password' exact component={Password} can={Auth.auth} redirect='/login'/>\n          <AppRoute path='/register' component={Register} can={Auth.guest} redirect='/'/>\n          <AppRoute path='/login' component={Login} can={Auth.guest} redirect='/'/>\n          <Router component={NotFound}/>\n        </Switch>\n      </Router>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport 'moment/locale/ar';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}